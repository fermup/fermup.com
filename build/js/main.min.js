function clickPercent(){return(event.pageX-timeline.offsetLeft)/timelineWidth}function mouseDown(){onplayhead=!0,window.addEventListener("mousemove",moveplayhead,!0),music.removeEventListener("timeupdate",timeUpdate,!1)}function mouseUp(e){onplayhead===!0&&(moveplayhead(e),window.removeEventListener("mousemove",moveplayhead,!0),music.currentTime=duration*clickPercent(e),music.addEventListener("timeupdate",timeUpdate,!1)),onplayhead=!1}function moveplayhead(e){var t=e.pageX-timeline.offsetLeft;t>=0&&timelineWidth>=t&&(playhead.style.width=t+"px"),0>t&&(playhead.style.width="0px"),t>timelineWidth&&(playhead.style.width=timelineWidth+"px")}function secondsToMinutesAndSeconds(e){var t=Math.floor(e/60),n=(e%60).toFixed(0);return(10>t?"0":"")+t+":"+(10>n?"0":"")+n}function timeUpdate(){var e=timelineWidth*(music.currentTime/duration);playhead.style.width=e+"px",curTimer.innerHTML=String(secondsToMinutesAndSeconds(music.currentTime)),music.currentTime===duration&&(pButton.className="",pButton.className="play")}function play(){music.paused?(music.play(),pButton.className="",pButton.className="pause"):(music.pause(),pButton.className="",pButton.className="play")}var music=document.getElementById("music"),duration,pButton=document.getElementById("pButton"),playhead=document.getElementById("playhead"),timeline=document.getElementById("timeline"),curTimer=document.getElementById("curTimer"),timelineWidth=timeline.offsetWidth-playhead.offsetWidth;music.addEventListener("timeupdate",timeUpdate,!1),timeline.addEventListener("click",function(e){moveplayhead(e),music.currentTime=duration*clickPercent(e)},!1),playhead.addEventListener("mousedown",mouseDown,!1),window.addEventListener("mouseup",mouseUp,!1);var onplayhead=!1;music.addEventListener("canplaythrough",function(){duration=music.duration},!1);